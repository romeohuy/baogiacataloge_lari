@using Nop.Core.Domain.Estimate
@using Nop.Services
@model ProductByTypeEstimateStepModel

<div class="row">
    <div class="col-md-2">
        <nop-label asp-for="ProductId" />
    </div>
    <div class="col-md-8 mb-3">
        <input type="hidden" value="@Model.TypeEstimateStepId" id="@Html.IdFor(m => m.TypeEstimateStepId)" name="@Html.IdFor(m => m.TypeEstimateStepId)"/>

        <nop-select asp-for="ProductId" asp-items="@Model.ProductItems"/>
    </div>
    <div class="col-md-2 mb-3">
        <button id="btnAddToEstimate" type="button" class="btn btn-success">@T("ProductByTypeEstimateStep.Button.SelectProduct")</button>
    </div>
</div>

<script>
    $(function() {
        $("#btnAddToEstimate").on('click', function() {
            if ($("#@Html.IdFor(model=>model.ProductId)").val() === '0') {
                alert('Vui lòng chọn sản phẩm.');
            } else {
                $("#btn-save-estimate-info").on('click', function() {
                    //Call ajax submit form
                    $.ajax({
                        url: "@Html.Raw(Url.Action("AddProductToEstimate", "Estimate"))",
                        type: "POST",
                        dataType: "json",
                        data: {

                        }
                    }).done(function( data ) {
                        if (data.Success) {

                        } else {

                        }

                    });

                });
            }
        });
    });
</script>